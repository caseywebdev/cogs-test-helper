#!/usr/bin/env node

const path = require('path');
const spawn = require('child_process').spawn;

const nyc = path.resolve(
  path.dirname(require.resolve('nyc')),
  require('nyc/package').bin.nyc
);

const mocha = path.resolve(
  path.dirname(require.resolve('mocha')),
  require('mocha/package').bin.mocha
);

spawn(
  nyc,
  [].concat(
    '--temp-directory=./coverage/.nyc_output',
    '--reporter=text',
    '--reporter=lcov',
    mocha,
    process.argv.slice(2)
  ),
  {stdio: 'inherit'}
).on('exit', process.exit.bind(process));
